// Log utils

#include "log.h"
#include <time.h>
#include <string.h>
#include <stdio.h>
#include <stdarg.h>
#include <stdlib.h>
#include <pthread.h>

size_t _log(int loglv, FILE * f,
           int line, const char * file,
           const char * fmt, ...) {

    size_t  ret = 0;
    va_list args;
    char    tmp_log[1024];
    char    tmp_ts[64];
    time_t  tmp_time;

	pthread_t pthread_id = pthread_self();
    if (loglv > LOGLV) return 0;

    tmp_time = time(NULL);
    strftime(tmp_ts, 27, "%Y-%m-%d %H:%M:%S", localtime(&tmp_time));

    memset(tmp_log, 0, sizeof(tmp_log));
    va_start(args, fmt);
    vsnprintf(tmp_log, 1023, fmt, args);
    va_end(args);

    ret = fprintf(f, "[%s] [%-15s:%4d] [tid:%15lu]: %s\n", tmp_ts, file, line, pthread_id, tmp_log);
    return ret;
}

void print_logo( char * w )
{
	if( !strcmp( w, "apple" ) )
	{
			printf(
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									Here' s to the crazy ones. The misfits. The rebels. The troublemakers. The round pegs in the square holes.\n"
					"									The ones who see things differently. They' re not fond of rules. And they have no respect for the status\n"
					"									quo. You can quote them, disagree with them, glorify or vilify them. About the only thing that you can' t do\n"
					"									is ignore them. Because they change things. They push the human race forward. While some may see them as the\n"
					"									crazy ones. We see genius. Because the people who are crazy enough to think that they can change the world\n"
					"									are the ones who do.\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@3;.S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@X     :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@M       @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@h       i@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#       i@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@,     .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@   .i@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@HX5SXH@@@@@@@@@@@@3srri3M@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#:          .5@@@#r            2@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B                                  ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@r                                    h@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:                                 :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@5                                 #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                 9@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@9                                 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@r                                 #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@;                                 G@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@i                                 .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@B                                 S@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                 2M@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:                                  :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                   9@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@;                                   i2;r@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                      i@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                    r@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                  s@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                X@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@:                             #@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&                          :@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@9.    .i#@@@@@@@3:     ;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
					"									@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"

					"																												————edit by ZhengXie 2014.5.22\n\n\n"

			);
	}
}
